name: "Get paths"

description: "Get changed extensions"

inputs:
  custom_paths:
    description: "Paths from user input for manually dispatched runs"
  github_event_name:
    description: "github.event_name"
outputs:
  paths:
    description: "Paths for changed extensions"
    value: ${{ steps.get_changed_extensions.outputs.paths }}
runs:
  using: "composite"
  steps:
    - name: Get paths
      id: get_paths
      uses: raycast/github-actions/get-paths@dev
      with:
        custom_paths: ${{ inputs.custom_paths }}
        github_event_name: ${{ inputs.github_event_name }}
    - name: Get changed extensions
      shell: bash
      id: get_changed_extensions
      run: |
        set -o noglob

        set +e
        get_changed_extensions_result=$(${{ github.action_path }}/get_changed_extensions.sh "${{ steps.get_paths.outputs.paths }}")
        exit_status=$?
        set -e

        if [ $exit_status -eq 0 ]; then
          echo "paths=$get_changed_extensions_result" >> $GITHUB_OUTPUT
        else
          echo $get_changed_extensions_result
        fi
        exit $exit_status
